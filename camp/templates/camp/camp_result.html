{% extends 'camp/layout.html' %}
{% load static %}

{% block body %}

{% block content %}
<div class="d-flex flex-column justify-content-center align-items-center min-vh-100 my-5" style="margin-top: 20px; margin-bottom: 20px;">
  <h2 class="text-center mb-4">Camp Reservation Results</h2>
  <ul class="list-unstyled text-center">
    <li><strong>Start Date:</strong> {{ start_date }}</li>
    <li><strong>End Date:</strong> {{ end_date }}</li>
    <li><strong>Campsite ID:</strong> {{ campsite_id }}</li>
    <li><strong>Nights:</strong> {{ nights }}</li>
  </ul>

  {% if has_availabilities %}
    <h2 class="text-center mt-4">Availability Status</h2>
    <p class="text-success text-center">Campsites are available for your selected dates! ðŸ˜„</p>
  {% else %}
    <h2 class="text-center mt-4">Availability Status</h2>
    <p class="text-danger text-center">Unfortunately, no campsites are available for your selected dates. ðŸ˜¢</p>
  {% endif %}

  <h2 class="text-center mt-4">Detailed Output</h2>
  {% if output %}
    <pre class="bg-light p-3 rounded" style="white-space: pre-wrap; word-break: break-word;">{{ output }}</pre>
  {% else %}
    <p class="text-center">No additional information available.</p>
  {% endif %}

  {% if show_campsite_info and campsite_info %}
    <h3 class="text-center mt-4">Detailed Campsite Information</h3>
    {% for park_id, park_info in campsite_info.items %}
      <div class="mt-3">
        <h4 class="text-center">
          {{ park_info.3 }} (
          <a href="https://www.recreation.gov/camping/campgrounds/{{ park_id }}" target="_blank">
            {{ park_id }}
          </a>)
        </h4>
        <p class="text-center">{{ park_info.0 }} site(s) available out of {{ park_info.1 }} site(s)</p>
        <ul class="list-group">
          {% for site_id, dates in park_info.2.items %}
            <li class="list-group-item">
              <strong>Site {{ site_id }}:</strong>
              <ul class="list-unstyled">
                {% for date in dates %}
                  <li>{{ date.start }} -> {{ date.end }}</li>
                {% endfor %}
              </ul>
            </li>
          {% endfor %}
        </ul>
      </div>
    {% endfor %}
  {% endif %}

  <a href="{% url 'select_camp' %}" 
    class="btn btn-primary rounded-pill mt-4"
    data-toggle="tooltip"
    data-placement="right"
    title="Search Again"
    type="search_again"
    style="padding: 0.5em; width: 100%; max-width: 200px;">Search Again</a>
{% endblock %}
</div>
{% endblock %}